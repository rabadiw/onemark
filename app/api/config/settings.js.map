{"version":3,"file":"settings.js","sourceRoot":"E:/Users/Wael/Work/psx/onemark/src-api/src-api/","sources":["api/config/settings.ts"],"names":[],"mappings":";;AAAA,iDAAuD;AACvD,MAAM,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC;AAC7B,MAAM,EAAE,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC;AASzB,MAAM,YAAY,GAAG,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,OAAO,CAAC,UAAU,EAAE,QAAQ,CAAC,CAAC,CAAC;AAEzE,oBAAoB,YAAY;IAC9B,IAAI,mBAAmB,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC,CAAC,CAAA;IAC3E,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,EAAE,mBAAmB,CAAC,CAAC;AACzD,CAAC;AAGD,OAAO,CAAC,QAAQ,CAAC,CAAC,MAAM,CAAC,EAAE,IAAI,EAAE,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC,EAAE,CAAC,CAAA;AAEvE,MAAM,SAAS,GAAG,CAAC,IAAiB;IAKlC,IAAI,WAAW,GAAW,OAAO,CAAC,GAAG,CAAC,YAAY,IAAI,aAAa,CAAA;IACnE,MAAM,CAAC,WAAW,CAAC,WAAW,EAAE,KAAK,IAAI,CAAC,WAAW,EAAE,CAAA;AACzD,CAAC,CAAA;AAED,MAAM,OAAO,GAAG;IACd,MAAM,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,YAAY,IAAI,IAAI,CAAC,CAAA;AAC3C,CAAC,CAAA;AAED,MAAM,cAAc,GAAG;IACrB,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,YAAY,IAAI,0BAA0B,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAA;AACxG,CAAC,CAAA;AAED,MAAM,WAAW,GAAG;IAClB,YAAY,EAAE,SAAS,CAAC,YAAY,CAAC;IACrC,IAAI,EAAE,OAAO,EAAE;IACf,SAAS,EAAE,OAAO;IAClB,WAAW,EAAE,cAAc,EAAE;IAC7B,MAAM,EAAE,eAAiB;CAC1B,CAAA;AAEQ,kCAAW","sourcesContent":["import { ITracer, tracer } from \"../../modules/tracer\";\r\nconst path = require(\"path\");\r\nconst fs = require(\"fs\");\r\n\r\ntype RuntimeMode = \"Production\" | \"Development\"\r\n\r\n// Set the path to root path of the app\r\n// expected structure\r\n// root\r\n//    - domain\r\n//    - context\r\nconst appDirectory = fs.realpathSync(path.resolve(__filename, \"../../\"));\r\n\r\nfunction resolveApp(relativePath) {\r\n  let relativePathCleaned = path.join(...(relativePath.match(/([^\\\\\\/])*/g)))\r\n  return path.resolve(appDirectory, relativePathCleaned);\r\n}\r\n\r\n// note: follow app/api/config path\r\nrequire('dotenv').config({ path: resolveApp(path.join(\"..\", \".env\")) })\r\n\r\nconst isRuntime = (mode: RuntimeMode) => {\r\n  // code to test between dev or prod, update accordingly\r\n  // let { argv } = (process || { argv: <string[]>[] })\r\n  // const cmdDevPredicate = v => /^--dev$/.test(v)\r\n  // return ((mode === \"Development\") && argv.some(cmdDevPredicate))\r\n  let runtimeMode: string = process.env.RUNTIME_MODE || \"Development\"\r\n  return runtimeMode.toLowerCase() === mode.toLowerCase()\r\n}\r\n\r\nconst getPort = () => {\r\n  return (process.env.ONEMARK_PORT || 3010)\r\n}\r\n\r\nconst getOnemarkPath = () => {\r\n  return resolveApp(path.join(...((process.env.ONEMARK_PATH || \"./context/file/urls.json\").split(\"/\"))))\r\n}\r\n\r\nconst appSettings = {\r\n  isProduction: isRuntime(\"Production\"),\r\n  port: getPort(),\r\n  bodyLimit: \"100kb\",\r\n  marksDbPath: getOnemarkPath(),\r\n  tracer: tracer as ITracer\r\n}\r\n\r\nexport { appSettings }"]}