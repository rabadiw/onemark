{"version":3,"file":"marks.router.js","sourceRoot":"E:/Users/Wael/Work/psx/onemark/src-api/src-api/","sources":["marks/marks.router.ts"],"names":[],"mappings":";;AAAA,qCAAiC;AACjC,2DAAwE;AACxE,gEAA0E;AAE1E,MAAM,MAAM,GAAG,gBAAM,EAAE,CAAC;AAgDL,6BAAW;AA/C9B,MAAM,UAAU,GAAG,IAAI,kCAAU,CAAC,IAAI,0BAAS,EAAE,CAAC,CAAC;AAEnD,MAAM,WAAW,GAAG,CAAC,GAAG,EAAE,GAAG;IAC3B,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;IACzB,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,GAAG,CAAC,OAAO,EAAE,CAAC,CAAC;AAC/C,CAAC,CAAC;AAGF,MAAM,CAAC,GAAG,CAAC,iBAAiB,GAAG,EAAE,GAAG,EAAE,IAAI;IACxC,OAAO,CAAC,GAAG,CAAC,SAAS,IAAI,CAAC,GAAG,EAAE,MAAM,GAAG,CAAC,MAAM,WAAW,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;IACvF,IAAI,EAAE,CAAC;AACT,CAAC,CAAC,CAAC;AAEH,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC;KACd,GAAG,CAAC,CAAC,GAAG,EAAE,GAAG;IACZ,UAAU,CAAC,MAAM,EAAE;SAChB,IAAI,CAAC,CAAC,IAAI;QACT,GAAG,CAAC,SAAS,CAAC,cAAc,EAAE,gCAAgC,CAAC,CAAC;QAChE,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IACjB,CAAC,CAAC;SACD,KAAK,CAAC,CAAC,GAAG,KAAK,WAAW,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,CAAC;AAC3C,CAAC,CAAC;KACD,IAAI,CAAC,CAAC,GAAG,EAAE,GAAG;IACb,UAAU,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC;SACtB,IAAI,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;SACxB,KAAK,CAAC,CAAC,GAAG,KAAK,GAAG,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;AACnD,CAAC,CAAC,CAAC;AAEL,MAAM,CAAC,KAAK,CAAC,MAAM,CAAC;KACjB,GAAG,CAAC,CAAC,GAAG,EAAE,GAAG;IACZ,UAAU,CAAC,GAAG,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC;SAC1B,IAAI,CAAC,CAAC,IAAI;QACT,GAAG,CAAC,SAAS,CAAC,cAAc,EAAE,gCAAgC,CAAC,CAAC;QAChE,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC;YACzC,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;QAClB,CAAC;QACD,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IACjB,CAAC,CAAC;SACD,KAAK,CAAC,CAAC,GAAG,KAAK,WAAW,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,CAAC;AAC3C,CAAC,CAAC;KACD,MAAM,CAAC,CAAC,GAAG,EAAE,GAAG;IACf,UAAU,CAAC,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC;SAC7B,IAAI,CAAC,MAAM,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,CAAC;SAClC,KAAK,CAAC,CAAC,GAAG,KAAK,WAAW,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,CAAC;AAE3C,CAAC,CAAC,CAAC","sourcesContent":["import { Router } from \"express\";\r\nimport { MarksListRepo as MarksRepo } from \"../context/file/marks.repo\";\r\nimport { MarksController as Controller } from \"../marks/marks.controller\";\r\n\r\nconst router = Router();\r\nconst controller = new Controller(new MarksRepo());\r\n\r\nconst handleError = (err, res) => {\r\n  console.log(err.message);\r\n  res.status(400).json({ error: err.message });\r\n};\r\n\r\n// middleware that is specific to this router\r\nrouter.use(function timeLog(req, res, next) {\r\n  console.log(`Time: ${Date.now()} - ${req.method} - body(${JSON.stringify(req.body)})`);\r\n  next();\r\n});\r\n\r\nrouter.route(\"/\")\r\n  .get((req, res) => {\r\n    controller.getAll()\r\n      .then((data) => {\r\n        res.setHeader(\"Content-Type\", \"application/json;charset=utf-8\");\r\n        res.send(data);\r\n      })\r\n      .catch((err) => handleError(err, res));\r\n  })\r\n  .post((req, res) => {\r\n    controller.post(req.body)\r\n      .then((v) => res.send(v))\r\n      .catch((err) => res.sendStatus(400).send(err));\r\n  });\r\n\r\nrouter.route(\"/:id\")\r\n  .get((req, res) => {\r\n    controller.get(req.params.id)\r\n      .then((data) => {\r\n        res.setHeader(\"Content-Type\", \"application/json;charset=utf-8\");\r\n        if (!data.data || data.data.length === 0) {\r\n          res.status(404); // not found\r\n        }\r\n        res.send(data);\r\n      })\r\n      .catch((err) => handleError(err, res));\r\n  })\r\n  .delete((req, res) => {\r\n    controller.delete(req.params.id)\r\n      .then(() => res.status(200).json())\r\n      .catch((err) => handleError(err, res));\r\n\r\n  });\r\n\r\nexport { router as MarksRouter };\r\n\r\n\r\n"]}